# revx.yaml - Reverse Proxy Configuration Example

# Server settings
server:
  port: 3000
  host: 0.0.0.0
  name: "My Reverse Proxy"
  # Max concurrent sockets (useful for Vite and other dev servers)
  # Default: 256
  # maxSockets: 512

# Global configuration
global:
  # Max concurrent sockets (can also be set here)
  # maxSockets: 256

  # CORS settings
  cors:
    enabled: true
    origin: "*"
    methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    credentials: true

  # Logging settings
  logging:
    enabled: true
    format: "combined"  # combined | dev | common | short | tiny

# Route definitions
routes:
  # Example 1: Simple proxy to API server
  - path: "/api/*"
    target: "http://localhost:4000"
    changeOrigin: true
    pathRewrite:
      "^/api": ""

  # Example 2: WebSocket proxy (critical for HMR)
  - path: "/ws"
    target: "ws://localhost:5000"
    ws: true
    changeOrigin: true

  # Example 3: Static file serving (for Vite build output)
  - path: "/*"
    static: "./dist"

  # Example 4: Proxy to Vite dev server
  # - path: "/*"
  #   target: "http://localhost:5173"
  #   ws: true  # Enable WebSocket for HMR
  #   changeOrigin: true
